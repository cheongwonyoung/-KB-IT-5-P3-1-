{"ast":null,"code":"import { createRouter, createWebHistory } from \"vue-router\";\nimport HomeP from \"@/pages/Home.vue\";\nimport ProductP from \"@/pages/Product.vue\";\nimport PropertyP from \"@/pages/Property.vue\";\nimport CommunityP from \"@/pages/Community.vue\";\nimport LoginP from \"@/pages/LoginPage.vue\";\nimport apiClient from \"@/axios\";\nconst routes = [{\n  path: \"/\",\n  name: \"Home\",\n  component: HomeP\n}, {\n  path: \"/product\",\n  name: \"Product\",\n  component: ProductP\n}, {\n  path: \"/property\",\n  name: \"Property\",\n  component: PropertyP\n}, {\n  path: \"/community\",\n  name: \"Community\",\n  component: CommunityP\n}, {\n  path: \"/login\",\n  name: \"Login\",\n  component: LoginP\n}];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  const token = localStorage.getItem('JwtToken'); // 토큰을 localStorage에서 가져옴\n\n  if (to.name !== 'Login') {\n    if (!token) next({\n      name: 'Login'\n    });\n    apiClient.get(\"/auth/authenticate\").then(res => {\n      if (res.status == 200) next();else {\n        next({\n          name: 'Login'\n        });\n      }\n    }).catch(err => {\n      if (err.status == 401) alert(\"로그인이 만료되었습니다. 다시 로그인 해주세요.\");\n      console.log(err);\n      next({\n        name: 'Login'\n      });\n    });\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","HomeP","ProductP","PropertyP","CommunityP","LoginP","apiClient","routes","path","name","component","router","history","beforeEach","to","from","next","token","localStorage","getItem","get","then","res","status","catch","err","alert","console","log"],"sources":["/Users/gimeus/Desktop/Crunch-It/Crunch-It/Development/FE/muno-muno/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from \"vue-router\";\nimport HomeP from \"@/pages/Home.vue\";\nimport ProductP from \"@/pages/Product.vue\";\nimport PropertyP from \"@/pages/Property.vue\";\nimport CommunityP from \"@/pages/Community.vue\";\nimport LoginP from \"@/pages/LoginPage.vue\";\nimport apiClient from \"@/axios\";\n\nconst routes = [\n    { path: \"/\", name: \"Home\", component: HomeP },\n    { path: \"/product\", name: \"Product\", component: ProductP },\n    { path: \"/property\", name: \"Property\", component: PropertyP },\n    { path: \"/community\", name: \"Community\", component: CommunityP },\n    { path: \"/login\", name: \"Login\", component: LoginP },\n];\n\nconst router = createRouter({\n    history: createWebHistory(),\n    routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n  const token = localStorage.getItem('JwtToken'); // 토큰을 localStorage에서 가져옴\n  \n  if (to.name !== 'Login') {\n    if(!token) next({name:'Login'});\n    apiClient.get(\"/auth/authenticate\").then(res=>{\n      if(res.status == 200) next();\n      else{\n        next({name: 'Login'})\n      } \n    }).catch(err=>{\n      if(err.status==401) alert(\"로그인이 만료되었습니다. 다시 로그인 해주세요.\");\n      console.log(err);\n      next({name: 'Login'});\n    })\n  } else {\n    next();\n  }\n});\n\nexport default router;\n"],"mappings":"AAAA,SAASA,YAAY,EAAEC,gBAAgB,QAAQ,YAAY;AAC3D,OAAOC,KAAK,MAAM,kBAAkB;AACpC,OAAOC,QAAQ,MAAM,qBAAqB;AAC1C,OAAOC,SAAS,MAAM,sBAAsB;AAC5C,OAAOC,UAAU,MAAM,uBAAuB;AAC9C,OAAOC,MAAM,MAAM,uBAAuB;AAC1C,OAAOC,SAAS,MAAM,SAAS;AAE/B,MAAMC,MAAM,GAAG,CACX;EAAEC,IAAI,EAAE,GAAG;EAAEC,IAAI,EAAE,MAAM;EAAEC,SAAS,EAAET;AAAM,CAAC,EAC7C;EAAEO,IAAI,EAAE,UAAU;EAAEC,IAAI,EAAE,SAAS;EAAEC,SAAS,EAAER;AAAS,CAAC,EAC1D;EAAEM,IAAI,EAAE,WAAW;EAAEC,IAAI,EAAE,UAAU;EAAEC,SAAS,EAAEP;AAAU,CAAC,EAC7D;EAAEK,IAAI,EAAE,YAAY;EAAEC,IAAI,EAAE,WAAW;EAAEC,SAAS,EAAEN;AAAW,CAAC,EAChE;EAAEI,IAAI,EAAE,QAAQ;EAAEC,IAAI,EAAE,OAAO;EAAEC,SAAS,EAAEL;AAAO,CAAC,CACvD;AAED,MAAMM,MAAM,GAAGZ,YAAY,CAAC;EACxBa,OAAO,EAAEZ,gBAAgB,CAAC,CAAC;EAC3BO;AACJ,CAAC,CAAC;AAEFI,MAAM,CAACE,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;;EAEhD,IAAIL,EAAE,CAACL,IAAI,KAAK,OAAO,EAAE;IACvB,IAAG,CAACQ,KAAK,EAAED,IAAI,CAAC;MAACP,IAAI,EAAC;IAAO,CAAC,CAAC;IAC/BH,SAAS,CAACc,GAAG,CAAC,oBAAoB,CAAC,CAACC,IAAI,CAACC,GAAG,IAAE;MAC5C,IAAGA,GAAG,CAACC,MAAM,IAAI,GAAG,EAAEP,IAAI,CAAC,CAAC,CAAC,KACzB;QACFA,IAAI,CAAC;UAACP,IAAI,EAAE;QAAO,CAAC,CAAC;MACvB;IACF,CAAC,CAAC,CAACe,KAAK,CAACC,GAAG,IAAE;MACZ,IAAGA,GAAG,CAACF,MAAM,IAAE,GAAG,EAAEG,KAAK,CAAC,4BAA4B,CAAC;MACvDC,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;MAChBT,IAAI,CAAC;QAACP,IAAI,EAAE;MAAO,CAAC,CAAC;IACvB,CAAC,CAAC;EACJ,CAAC,MAAM;IACLO,IAAI,CAAC,CAAC;EACR;AACF,CAAC,CAAC;AAEF,eAAeL,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}